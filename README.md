# Smart Credit - Tally Sync Server

This project runs a local Node.js server to synchronize financial data (Sundry Debtors & Creditors) from Tally Prime and serve it as a JSON API for the dashboard.

## Prerequisites

1.  **Node.js**: Ensure Node.js is installed on the system. [Download Here](https://nodejs.org/).
2.  **Tally Prime**:
    *   Must be running on the same PC.
    *   **ODBC Server / HTTP Server** must be enabled on port **9000**.
    *   *To configure Tally Port*: Go to **F1: Help > Settings > Connectivity > Client/Server configuration**. Set "Enable TallyPrime as HTTP/ODBC Server" to **Yes** and Port to **9000**.

## Setup Instructions

1.  Open this folder in a terminal (Command Prompt or PowerShell).
2.  Install dependencies (run once):
    ```bash
    npm install
    ```

## Running the Server

1.  Start the server:
    ```bash
    node server.js
    ```
2.  The server will start on **http://localhost:3001**.

## Usage

### 1. Sync Data from Tally
To fetch the latest balances and transactions (2021-2026) from Tally, verify Tally is open and a company is loaded, then visit:

**[http://localhost:3001/api/sync](http://localhost:3001/api/sync)**

*   *Note: This process may take 1-2 minutes depending on the volume of data (fetching ~1000 ledgers).*
*   Check the terminal console for progress updates.

### 2. View Data
To see the processed JSON data:

**[http://localhost:3001/api/data](http://localhost:3001/api/data)**

## Project Structure

*   `server.js`: Main server file containing all logic for fetching Hierarchy, Grouping, and Transactions.
*   `credit-data.json`: The local database file generated by the sync process.
